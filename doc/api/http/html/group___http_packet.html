<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>http: HttpPacket</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="contents">
<h1>HttpPacket</h1>Packet object.  
<a href="#_details">More...</a>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">HttpPacket *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___http_packet.html#g928d7e619761a4f779ea673044fc20be">httpCreateDataPacket</a> (MprCtx ctx, int size)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a data packet.  <a href="#g928d7e619761a4f779ea673044fc20be"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">HttpPacket *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___http_packet.html#g5c5a6832b2e4294749f8d88c037288ab">httpCreateEndPacket</a> (MprCtx ctx)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create an eof packet.  <a href="#g5c5a6832b2e4294749f8d88c037288ab"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">HttpPacket *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___http_packet.html#gc8f20a76152cf3652a7cfb1070a2e285">httpCreateHeaderPacket</a> (MprCtx ctx)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a response header packet.  <a href="#gc8f20a76152cf3652a7cfb1070a2e285"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">HttpPacket *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___http_packet.html#g0f0771e309d6aa982b607d4e7460adaf">httpCreatePacket</a> (MprCtx ctx, int size)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a data packet.  <a href="#g0f0771e309d6aa982b607d4e7460adaf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___http_packet.html#g950c7da3e3da8e3f2004c6cfb162dba1">httpGetPacketLength</a> (HttpPacket *packet)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the length of the packet data contents.  <a href="#g950c7da3e3da8e3f2004c6cfb162dba1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___http_packet.html#g6c9a2e1da5b57252b7cf2e1958dcdc96">httpJoinPacket</a> (HttpPacket *packet, HttpPacket *other)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Join two packets.  <a href="#g6c9a2e1da5b57252b7cf2e1958dcdc96"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">HttpPacket *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___http_packet.html#g43041fdf77696fb2193a6f72a05f1947">httpSplitPacket</a> (struct HttpConn *conn, HttpPacket *packet, int offset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Split a data packet.  <a href="#g43041fdf77696fb2193a6f72a05f1947"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Packet object. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>The request/response pipeline sends data and control information in HttpPacket objects. The output stream typically consists of a HEADER packet followed by zero or more data packets and terminated by an END packet. If the request has input data, the input stream is consists of one or more data packets followed by an END packet. <br>
<br>
 Packets contain data and optional prefix or suffix headers. Packets can be split, joined, filled or emptied. The pipeline stages will fill or transform packet data as required. </dd></dl>
<dl class="user" compact><dt><b><b>API</b> Stability:</b></dt><dd>Evolving</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="group___http_packet.html" title="Packet object.">HttpPacket</a> <a class="el" href="group___http_queue.html" title="Queue object.">HttpQueue</a> <a class="el" href="group___http_packet.html#g0f0771e309d6aa982b607d4e7460adaf" title="Create a data packet.">httpCreatePacket</a>, httpCreateConnPacket <a class="el" href="group___http_packet.html#g928d7e619761a4f779ea673044fc20be" title="Create a data packet.">httpCreateDataPacket</a> <a class="el" href="group___http_packet.html#g5c5a6832b2e4294749f8d88c037288ab" title="Create an eof packet.">httpCreateEndPacket</a> httpFreePacket <a class="el" href="group___http_packet.html#g6c9a2e1da5b57252b7cf2e1958dcdc96" title="Join two packets.">httpJoinPacket</a> <a class="el" href="group___http_packet.html#g43041fdf77696fb2193a6f72a05f1947" title="Split a data packet.">httpSplitPacket</a> <a class="el" href="group___http_packet.html#g950c7da3e3da8e3f2004c6cfb162dba1" title="Get the length of the packet data contents.">httpGetPacketLength</a> <a class="el" href="group___http_packet.html#gc8f20a76152cf3652a7cfb1070a2e285" title="Create a response header packet.">httpCreateHeaderPacket</a> <a class="el" href="group___http_queue.html#g289893521c40788edc06280530167a85" title="Get the next packet from a queue.">httpGetPacket</a> <a class="el" href="group___http_queue.html#g7ca69588fa498e117f23b73956ae66f0" title="Join a packet onto the service queue.">httpJoinPacketForService</a> <a class="el" href="group___http_queue.html#g34d9cc6e8919398d18a1359ae72a821c" title="Put a packet onto the service queue.">httpPutForService</a> <a class="el" href="group___http_queue.html#gfb4d0f9b9d5caa21b605e015154de36e" title="Test if a packet is too big.">httpIsPacketTooBig</a> <a class="el" href="group___http_queue.html#ga96c28b6f2d43868162ddc9face7eada" title="Put a packet onto a queue.">httpSendPacket</a> <a class="el" href="group___http_queue.html#g8bdb0b39ec10ee344c8e65179800836b" title="Put a packet back onto a queue.">httpPutBackPacket</a> <a class="el" href="group___http_queue.html#g34d9cc6e8919398d18a1359ae72a821c" title="Put a packet onto the service queue.">httpPutForService</a> <a class="el" href="group___http_queue.html#gcd5f6b73bc94f750cdd9483be6a79d86" title="Put a packet onto the next queue.">httpSendPacketToNext</a> <a class="el" href="group___http_queue.html#gd1f81a4abe914e5388c38ea2e8518a8b" title="Resize a packet.">httpResizePacket</a> </dd></dl>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g928d7e619761a4f779ea673044fc20be"></a><!-- doxytag: member="http.h::httpCreateDataPacket" ref="g928d7e619761a4f779ea673044fc20be" args="(MprCtx ctx, int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HttpPacket* httpCreateDataPacket           </td>
          <td>(</td>
          <td class="paramtype">MprCtx&nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a data packet. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Create a packet and set the HTTP_PACKET_DATA flag Data packets convey data through the response pipeline. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ctx</em>&nbsp;</td><td>A conn or request memory context object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>Size of the package data storage. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>HttpPacket object. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g5c5a6832b2e4294749f8d88c037288ab"></a><!-- doxytag: member="http.h::httpCreateEndPacket" ref="g5c5a6832b2e4294749f8d88c037288ab" args="(MprCtx ctx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HttpPacket* httpCreateEndPacket           </td>
          <td>(</td>
          <td class="paramtype">MprCtx&nbsp;</td>
          <td class="paramname"> <em>ctx</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create an eof packet. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Create an end-of-stream packet and set the HTTP_PACKET_END flag. The end pack signifies the end of data. It is used on both incoming and outgoing streams through the request/response pipeline. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ctx</em>&nbsp;</td><td>A conn or request memory context object. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>HttpPacket object. </dd></dl>

</div>
</div><p>
<a class="anchor" name="gc8f20a76152cf3652a7cfb1070a2e285"></a><!-- doxytag: member="http.h::httpCreateHeaderPacket" ref="gc8f20a76152cf3652a7cfb1070a2e285" args="(MprCtx ctx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HttpPacket* httpCreateHeaderPacket           </td>
          <td>(</td>
          <td class="paramtype">MprCtx&nbsp;</td>
          <td class="paramname"> <em>ctx</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a response header packet. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Create a response header packet and set the HTTP_PACKET_HEADER flag. A header packet is used by the pipeline to hold the response headers. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ctx</em>&nbsp;</td><td>A conn or request memory context object. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>HttpPacket object. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g0f0771e309d6aa982b607d4e7460adaf"></a><!-- doxytag: member="http.h::httpCreatePacket" ref="g0f0771e309d6aa982b607d4e7460adaf" args="(MprCtx ctx, int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HttpPacket* httpCreatePacket           </td>
          <td>(</td>
          <td class="paramtype">MprCtx&nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a data packet. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Create a packet of the required size. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ctx</em>&nbsp;</td><td>A conn or request memory context object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>Size of the package data storage. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>HttpPacket object. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g950c7da3e3da8e3f2004c6cfb162dba1"></a><!-- doxytag: member="http.h::httpGetPacketLength" ref="g950c7da3e3da8e3f2004c6cfb162dba1" args="(HttpPacket *packet)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int httpGetPacketLength           </td>
          <td>(</td>
          <td class="paramtype">HttpPacket *&nbsp;</td>
          <td class="paramname"> <em>packet</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the length of the packet data contents. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Get the content length of a packet. This does not include the prefix or suffix data length -- just the pure data contents. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>packet</em>&nbsp;</td><td>Packet to examine. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Count of bytes contained by the packet. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g6c9a2e1da5b57252b7cf2e1958dcdc96"></a><!-- doxytag: member="http.h::httpJoinPacket" ref="g6c9a2e1da5b57252b7cf2e1958dcdc96" args="(HttpPacket *packet, HttpPacket *other)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int httpJoinPacket           </td>
          <td>(</td>
          <td class="paramtype">HttpPacket *&nbsp;</td>
          <td class="paramname"> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HttpPacket *&nbsp;</td>
          <td class="paramname"> <em>other</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Join two packets. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Join the contents of one packet to another by copying the data from the <em>other</em> packet into the first packet. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>packet</em>&nbsp;</td><td>Destination packet </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>other</em>&nbsp;</td><td>Other packet to copy data from. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Zero if successful, otherwise a negative Mpr error code </dd></dl>

</div>
</div><p>
<a class="anchor" name="g43041fdf77696fb2193a6f72a05f1947"></a><!-- doxytag: member="http.h::httpSplitPacket" ref="g43041fdf77696fb2193a6f72a05f1947" args="(struct HttpConn *conn, HttpPacket *packet, int offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HttpPacket* httpSplitPacket           </td>
          <td>(</td>
          <td class="paramtype">struct HttpConn *&nbsp;</td>
          <td class="paramname"> <em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HttpPacket *&nbsp;</td>
          <td class="paramname"> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>offset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Split a data packet. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Split a data packet at the specified offset. Packets may need to be split so that downstream stages can digest their contents. If a packet is too large for the queue maximum size, it should be split. When the packet is split, a new packet is created containing the data after the offset. Any suffix headers are moved to the new packet. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>conn</em>&nbsp;</td><td>HttpConn connection object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>packet</em>&nbsp;</td><td>Packet to split </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>Location in the original packet at which to split </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>New HttpPacket object containing the data after the offset. No need to free, unless you have a very long running request. Otherwise the packet memory will be released automatically when the request completes. </dd></dl>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Jan 26 12:46:02 2010 for http by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
